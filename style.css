/* üåü General Layout */
body {
  background-color: #f9f9f9;
  font-family: "Comic Sans MS", cursive, sans-serif;
  text-align: center;
  margin: 0;
  padding: 0;
  overflow-x: hidden;
}

/* üß± Header */
header {
  background-color: #fff;
  padding: 6px 10px;
  box-shadow: 0 3px 8px rgba(0,0,0,0.2);
}
h1 {
  font-size: 2em;
  color: #222;
  text-shadow: 1px 1px #ccc;
  margin: 3px 0;
}
.button-row {
  margin-top: 5px;
}
.button-row button {
  background-color: #3ecf5b;
  color: white;
  border: none;
  border-radius: 15px;
  padding: 12px 22px;
  font-weight: bold;
  font-size: 1.2em;
  margin: 5px;
  cursor: pointer;
  box-shadow: 0 5px #2fa04a;
  transition: transform 0.15s;
}
.button-row button:hover { transform: scale(1.08); }



/* üß© Game Layout */
#game-container {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin: 10px;
  flex-wrap: nowrap;
}

/* Left = 40%, Right = 60% */
#left-panel {
  width: 40%;
  text-align: center;
}

#right-panel {
  width: 60%;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Image */
#image {
  width: 90%;
  max-width: 480px;
  border-radius: 15px;
  margin-top: 5px;
  padding: 2px;
  transition: transform 0.3s ease, opacity 0.3s ease;
}

#image.flash {
  transform: scale(1.1);
  opacity: 0.8;
}

/* üî† Letter Boxes */
#letters {
  display: flex;
  justify-content: center;
  gap: 10px;
  margin: 20px 0;
  flex-wrap: wrap;
}
/* üî† Letter Buttons ‚Äî 3D + White Outline + Bobbing */
/* üî† Letter Buttons ‚Äî 3D + White Outline */
.letter-btn {
  width: 150px;
  height: 150px;
  background: linear-gradient(145deg, #0a84ff, #0066cc);
  color: white;
  border-radius: 25px;
  border: 4px solid white;
  font-size: 4.5em;
  font-weight: bold;
  cursor: pointer;

  /* 3D EFFECT */
  box-shadow:
    6px 6px 12px rgba(0,0,0,0.25),
    -4px -4px 10px rgba(255,255,255,0.6),
    inset -4px -4px 8px rgba(0,0,0,0.3),
    inset 4px 4px 8px rgba(255,255,255,0.8);

  display: flex;
  align-items: center;
  justify-content: center;

  transition: all 0.2s ease;

  /* DEFAULT: pop/bounce animation (same as lightning boxes) */
  animation: bounceVibrateGroup 0.8s infinite;
}

/* When a letter is pressed ‚Üí turns orange + animation stops */
.letter-btn.selected {
  background: linear-gradient(145deg, #ffb347, #ff7f24);
  color: white;
  animation: none;
}

/* Magic-E stays gold + no animation */
.letter-btn.fixedE {
  background: linear-gradient(145deg, #ffe066, #d4b431);
  animation: none;
  cursor: default;
}

/* After Blend ‚Üí bright yellow + pop animation ONCE */
.letter-btn.blended {
  background: linear-gradient(145deg, #ffe066, #ffcc00) !important;
  border-color: white;
  color: black;

  animation: bounceVibrateGroup 0.8s 1;  /* play once */
}
@keyframes bounceVibrateGroup {
  0%, 100% { transform: scale(1); }
  50%     { transform: scale(1.04); }
}

/* üü¢ Blend Button */
/* üåü Blend Button ‚Äî 3D + White Outline */
#blendBtn {
  width: 500px;
  font-size: 2em;
  font-weight: bold;
  padding: 20px 0;
  margin: 10px auto;
  border-radius: 25px;
  border: 4px solid white;
  cursor: pointer;

  background: linear-gradient(145deg, #3ecf5b, #2fa04a);
  color: white;

  /* 3D */
  box-shadow:
    6px 6px 12px rgba(0,0,0,0.25),
    -4px -4px 10px rgba(255,255,255,0.7),
    inset -4px -4px 8px rgba(0,0,0,0.2),
    inset 4px 4px 8px rgba(255,255,255,0.8);

  transition: all 0.2s ease;
}

/* Bobbing when ready */
#blendBtn.ready {
  animation: blendBob 1.4s ease-in-out infinite;
}

@keyframes blendBob {
  0%,100% { transform: translateY(0); }
  50%     { transform: translateY(-10px); }
}

/* Pressed (stop bobbing) */
#blendBtn.pressed {
  animation: none;
  background: linear-gradient(145deg, #2fa04a, #1d8036);
}

/* üé≤ Dice - fixed top in right panel */
/* üé≤ 3D Dice Box + Base Style */
#dice {
  width: 140px;
  height: 140px;
  background: linear-gradient(145deg, #ffffff, #e2e2e2);
  border-radius: 25px;
  border: 5px solid black;

  /* Stronger 3D look */
  box-shadow:
    8px 8px 14px rgba(0,0,0,0.35),
    -4px -4px 12px rgba(255,255,255,0.9),
    inset -6px -6px 10px rgba(0,0,0,0.25),
    inset 6px 6px 10px rgba(255,255,255,0.8);

  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 5em;
  cursor: pointer;
  position: sticky;
  top: 10px;
  user-select: none;

  transition: transform 0.25s ease, filter 0.25s ease;
  z-index: 10;
}

/* Disabled state remains the same */
.disabledDice {
  pointer-events: none;
  opacity: 0.4;
}
/* üü° Activated (your turn): yellow glow + gentle bobbing */
.dice-active {
  filter: drop-shadow(0 0 22px yellow);
  animation: diceBobbing 1.3s ease-in-out infinite;
}

@keyframes diceBobbing {
  0%,100% { transform: translateY(0) scale(1); }
  50%     { transform: translateY(-12px) scale(1.02); }
}

/* üé≤ Hop + bounce (roll press): 3 quick hops ‚Üí slower hops */
.dice-hop {
  animation: diceHopBounce 0.9s ease-in-out;
}

@keyframes diceHopBounce {
  /* QUICK HOPS */
  0%   { transform: translateY(0); }
  10%  { transform: translateY(-45px); }
  20%  { transform: translateY(0); }
  30%  { transform: translateY(-35px); }
  40%  { transform: translateY(0); }

  /* MEDIUM HOPS */
  55%  { transform: translateY(-25px); }
  70%  { transform: translateY(0); }

  /* SLOW FINAL HOP */
  85%  { transform: translateY(-12px); }
  100% { transform: translateY(0); }
}

/* === RACETRACK GRID === */
/* üèÅ Responsive Auto-Scaling Racetrack */
#racetrack {
  display: grid;

  /* AUTO-FIT BOARD INTO SCREEN */
  grid-template-columns: repeat(8, minmax(0, 12vw));
  grid-template-rows: repeat(5, minmax(0, 12vw));

  justify-content: center;
  align-items: center;
  gap: 0px;
  margin-top: 10px;
  position: relative; /* ‚úÖ This line anchors .animal emojis inside racetrack instead of page */

  /* Prevent overflow */
  max-width: 100vw;
  max-height: 80vh;
}


/* === TILE BASE === */
.tile {
  width: min(12vw, 12vh);
  height: min(12vw, 12vh);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 2em;
  color: white;
  text-shadow: none;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}

/* === START & END === */
.tile.start {
  background-color: #4caf50; /* vivid green start */
}
.tile.end {
  background-color: #f44336; /* vivid red trophy end */
}

/* === RACETRACK TILE COLOURS === */
.tile.path {
  color: transparent !important; /* hide placeholder ‚¨ú */
}

/* Alternate bright candy colors */
.tile.path:nth-child(4n+1) {
  background-color: #4db8ff; /* bright sky blue */
}
.tile.path:nth-child(4n+2) {
  background-color: #ff6fb3; /* candy pink */
}
.tile.path:nth-child(4n+3) {
  background-color: #b266ff; /* vivid purple */
}
.tile.path:nth-child(4n+4) {
  background-color: #ffec66; /* bright yellow */
}

/* Subtle 3D board effect */
.tile.path {
  border-radius: 8px;
  box-shadow:
    inset 1px 1px 3px rgba(255,255,255,0.4),
    inset -2px -2px 4px rgba(0,0,0,0.1),
    0 2px 4px rgba(0,0,0,0.1);
}

/* === GRASS / DECORATIONS === */
.tile.grass,
.tile.tree,
.tile.house {
  background: linear-gradient(135deg, #fef9ff, #e0f7ff);
  border: 2px solid white;
  font-size: 4.2em;
  color: inherit !important;
  text-shadow: none;
}

/* === KEEP EMOJIS CRISP === */
.tile.fire-tile,
.tile.lightning-tile,
.tile.tree,
.tile.house,
.tile.grass {
  filter: none !important;
  text-shadow: none;
  color: inherit !important;
  z-index: 3;
}

/* ‚ö° Lightning Tiles */
.lightning-tile {
  color: #ffea00 !important; /* vivid yellow lightning */
  text-shadow:
    0 0 6px #ffff66,
    0 0 12px #ffd700,
    0 0 18px #ffea00;
  animation: lightningFlash 1.5s ease-in-out infinite;
}

@keyframes lightningFlash {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.85; transform: scale(1.1); }
}

/* üî• Fire Tiles */
.fire-tile {
  color: #ff4d00 !important; /* vivid fire orange */
  text-shadow:
    0 0 8px #ff3300,
    0 0 16px #ff6600,
    0 0 30px #ffaa33;
  animation: fireFlicker 1.5s ease-in-out infinite;
}

@keyframes fireFlicker {
  0%, 100% { transform: scale(1); opacity: 1; filter: brightness(1); }
  50% { transform: scale(1.12); opacity: 0.9; filter: brightness(1.25); }
}

/* === BONUS ANIMATION === */
.tile.active-bonus {
  animation: tileExpand 0.9s ease-in-out;
}

@keyframes tileExpand {
  0% { transform: scale(1); filter: brightness(1); }
  40% { transform: scale(1.5); filter: brightness(1.8); }
  70% { transform: scale(1.25); filter: brightness(1.4); }
  100% { transform: scale(1); filter: brightness(1); }
}

/* Bonus color tints */
.tile.lightning-tile.active-bonus {
  filter: drop-shadow(0 0 22px #ffea00);
}
.tile.fire-tile.active-bonus {
  filter: drop-shadow(0 0 18px #ff6600);
}


/* === ANIMAL EMOJIS ON TRACK === */
/* === GENTLE FLOATING BOUNCE FOR PLAYERS === */
.animal {
  position: absolute;
  font-size: 6.5em;      /* try 4.2‚Äì4.5em for your preferred size */
  transform: translate(-50%, -50%);
  transition: all 0.6s ease;
  z-index: 10;
  animation: floatBounce 3s ease-in-out infinite;
}

/* Gentle bounce motion */
@keyframes floatBounce {
  0%, 100% { transform: translate(-50%, -50%) translateY(0); }
  50% { transform: translate(-50%, -50%) translateY(-10px); }
}

/* Slightly offset animation timing for each player */
.animal:nth-child(1) { animation-delay: 0s; }
.animal:nth-child(2) { animation-delay: 0.4s; }
.animal:nth-child(3) { animation-delay: 0.8s; }
.animal:nth-child(4) { animation-delay: 1.2s; }
.animal:nth-child(5) { animation-delay: 1.6s; }


.animal.finished {
  opacity: 0.4;
  filter: grayscale(100%);
  transition: opacity 0.3s ease;
}


/* üü® Group Bounce for Letters */
.bounceVibrateGroup {
  animation: bounceVibrate 0.6s ease-in-out 3;
}
@keyframes bounceVibrate {
  0% { transform: scale(1); }
  20% { transform: scale(1.05) translateY(-10px); }
  50% { transform: scale(1.1); }
  80% { transform: scale(1.05) translateY(-5px); }
  100% { transform: scale(1); }
}

/* ü™© Popup */
.popup {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.7);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
}
.popup-content {
  background: white;
  border-radius: 20px;
  padding: 30px;
  width: 90%;
  max-width: 850px;
  text-align: center;
  overflow-y: auto;
  max-height: 90vh;
}

/* üë• Emoji Buttons */
#playerCountBtns button, #animalChoices button {
  font-size: 4.8em;
  margin: 5px;
  padding: 10px 15px;
  border-radius: 10px;
  border: none;
  cursor: pointer;
}
#animalChoices button.selected {
  background-color: #ffd700;
  border: 3px solid #ff8c00;
}
#animalChoices button:disabled {
  opacity: 0.8;
  cursor: not-allowed;
}
#startRaceBtn {
  background-color: #28a745;
  color: white;
  font-size: 1.8em;
  border: none;
  border-radius: 15px;
  margin-top: 20px;
  padding: 12px 25px;
  box-shadow: 0 6px #1d7c33;
  cursor: pointer;
  transition: transform 0.15s ease;
}
#startRaceBtn:hover { transform: scale(1.05); }




/* üì± Responsive Portrait Mode */
@media (orientation: portrait) {

  /* Stack everything vertically */
  #game-container {
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  /* Left panel becomes top section */
  #left-panel {
    order: 1;
    width: 95%;
  }

  /* Dice moves BELOW the left-panel section */
  #dice {
    order: 2;  /* dice comes after image/letters/blend */
    position: static !important;
    margin: 20px auto;
  }

  /* Racetrack comes after dice */
  #racetrack {
    order: 3;
    margin-top: 20px;
  }

  /* Right panel content stacks, but racetrack already moved above */
  #right-panel {
    order: 4;
    width: 95%;
  }
}

}  /* ‚Üê closes the @media block */